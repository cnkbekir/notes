import{d as O,u as te,z as ae,P as ne,p as ee,A as oe,B as se,r as re,a as ie,C as S,D as le,E as ue,G as T,H as ce,I as me,S as de,T as pe,J as ye,L as fe,K as f,s as Y,y,M as h,N as ge,c as he}from"./CYs8BMkd.js";import{u as A}from"./X5xv9utB.js";import{q as v}from"./CKH0R_vW.js";import{u as ve}from"./B7x5FsUc.js";import"./CZgDzoQD.js";const we=O({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(u,e){const a=await S[u.name]().then(n=>n.default||n);return()=>T(a,u.layoutProps,e.slots)}}),_e=O({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(u,e){const a=te(),n=ae(ne),c=n===ee()?oe():n,l=se(()=>{let d=f(u.name)??c.meta.layout??"default";return d&&!(d in S)&&u.fallback&&(d=f(u.fallback)),d}),_=re();e.expose({layoutRef:_});const k=a.deferHydration();if(a.isHydrating){const d=a.hooks.hookOnce("app:error",k);ie().beforeEach(d)}return()=>{const d=l.value&&l.value in S,t=c.meta.layoutTransition??le;return ue(pe,d&&t,{default:()=>T(de,{suspensible:!0,onResolve:()=>{me(k)}},{default:()=>T(ke,{layoutProps:ce(e.attrs,{ref:_}),key:l.value||void 0,name:l.value,shouldProvide:!u.name,hasTransition:!!t},e.slots)})}).default()}}}),ke=O({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(u,e){const a=u.name;return u.shouldProvide&&ye(fe,{isCurrent:n=>a===(n.meta.layout??"default")}),()=>{var n,c;return!a||typeof a=="string"&&!(a in S)?(c=(n=e.slots).default)==null?void 0:c.call(n):T(we,{key:a,layoutProps:u.layoutProps,name:a},e.slots)}}}),Te=O({__name:"[...slug]",async setup(u){var B,C,H,x,I,N,R,j,q,M,D,E,z,G,Q,J,K,U,V,W,X,Z;let e,a;const n=ee(),c=Y(),l=n.params.slug,_=l[0]==="categories",k=l[0]==="tags",d=l[0]==="archives";let t=null,$=null,g=1,L=1,w=`themes-${c.theme}-default`,P="",b="";const p=((B=c.pagination)==null?void 0:B.per_page)||10;if(_){P=l[1];const m="Category: "+P,o=m;y({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:m},{name:"og:description",content:o},{name:"twitter:title",content:m},{name:"twitter:description",content:o}]}),g=Number.parseInt(l[3])||1;const r={categories:{$in:P},hidden:{$ne:!0},listed:{$ne:!1}},s=([e,a]=h(async()=>A(n.path,async()=>{let i=v("").where(r).sort({date:-1});return p!=-1&&(i=i.limit(p).skip((g-1)*p)),await i.find()},"$hOgTnUIHuy")),e=await e,a(),e);L=([e,a]=h(()=>v("").where(r).count()),e=await e,a(),e),$=s.data,w=`themes-${c.theme}-category`}else if(d){const m="Archives",o="Archives";y({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:m},{name:"og:description",content:o},{name:"twitter:title",content:m},{name:"twitter:description",content:o}]}),g=Number.parseInt(l[2])||1;const r={hidden:{$ne:!0},listed:{$ne:!1}},s=([e,a]=h(async()=>A(n.path,async()=>{let i=v("").where(r).sort({date:-1});return p!=-1&&(i=i.limit(p).skip((g-1)*p)),await i.find()},"$QGRLpXz2pH")),e=await e,a(),e);L=([e,a]=h(()=>v("").where(r).count()),e=await e,a(),e),$=s.data,w=`themes-${c.theme}-archive`}else if(k){b=l[1];const m="Tag: "+b,o=m;y({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:m},{name:"og:description",content:o},{name:"twitter:title",content:m},{name:"twitter:description",content:o}]}),g=Number.parseInt(l[2])||1;const r={tags:{$in:b},hidden:{$ne:!0},listed:{$ne:!1}},s=([e,a]=h(async()=>A(n.path,async()=>{let i=v("").where(r).sort({date:-1});return p!=-1&&(i=i.limit(p).skip((g-1)*p)),await i.find()},"$sqp9lMT3no")),e=await e,a(),e);L=([e,a]=h(()=>v("").where(r).count()),e=await e,a(),e),$=s.data,w=`themes-${c.theme}-tag`}else{if(t=([e,a]=h(async()=>A(n.path,async()=>await v("").where({_path:n.path}).findOne(),"$QLuZ09IRgV")),e=await e,a(),e).data,(C=t.value)!=null&&C.layout){const s=t.value.layout;s.startsWith("themes")?w=s:w=`themes-${c.theme}-${s}`}if((H=t.value)!=null&&H.redirect_to_domain){const s=((x=t.value)==null?void 0:x.redirect_to_domain)+((I=t.value)==null?void 0:I._path);y({script:[{innerHTML:`window.location = "${s||"/"}"`}]})}if((N=t.value)!=null&&N.redirect_to_full_url){const s=(R=t.value)==null?void 0:R.redirect_to_full_url;y({script:[{innerHTML:`window.location = "${s||"/"}"`}]})}t.value&&ve(t.value);const o=Y().url.replace(/\/$/,""),r=o+((j=t.value)==null?void 0:j._path);if(y({meta:[{key:"og:type",name:"og:type",content:"article"},{key:"og:url",name:"og:url",content:r},{name:"twitter:text:title",content:(q=t.value)==null?void 0:q.title},{name:"twitter:card",content:"summary"},{name:"article:article:tag",content:(M=t.value)!=null&&M.tags?(D=t.value.tags)==null?void 0:D.toString():""}],link:[{rel:"canonical",href:r}]}),(E=t.value)!=null&&E.alternates){const s=((G=(z=t.value)==null?void 0:z.alternates)==null?void 0:G.map(i=>{const F=Object.keys(i)[0];return{rel:"alternate",href:i[F],hreflang:F}}))||[];s.push({rel:"alternate",href:r,hreflang:((Q=t.value)==null?void 0:Q.language)||"en"}),y({link:s})}(J=t.value)!=null&&J.cover&&y({meta:[{key:"og:image",name:"og:image",content:o+"/images/"+((K=t.value)==null?void 0:K.cover)},{name:"og:image:alt",content:(U=t.value)==null?void 0:U.title},{name:"twitter:image",content:o+"/images/"+((V=t.value)==null?void 0:V.cover)}]}),(W=t.value)!=null&&W.date&&y({meta:[{name:"article:published_time",content:new Date((X=t.value)==null?void 0:X.date).toISOString()},{name:"article:article:modified_time",content:new Date((Z=t.value)==null?void 0:Z.date).toISOString()}]})}return(m,o)=>{const r=_e;return he(),ge(r,{name:f(w),doc:f(t),docs:f($),"current-page":f(g),total:f(L),category:f(P),tag:f(b)},null,8,["name","doc","docs","current-page","total","category","tag"])}}});export{Te as default};
