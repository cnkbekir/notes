[{"data":1,"prerenderedAt":168},["ShallowReactive",2],{"/statik-wordpress-sitesi":3,"search-api":167},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":5,"title":7,"description":5,"id":8,"date":9,"categories":10,"tags":12,"cover":5,"readingTime":14,"body":19,"_type":161,"_id":162,"_source":163,"_file":164,"_stem":165,"_extension":166},"/statik-wordpress-sitesi","",false,"Statik Wordpress Sitesi","1","2023-11-16",[11],"web",[13],"wordpress",{"text":15,"minutes":16,"time":17,"words":18},"2 min read",1.315,78900,263,{"type":20,"children":21,"toc":158},"root",[22,30,67,72,77,82,94,99,109,114,119,127,132,140,148,153],{"type":23,"tag":24,"props":25,"children":26},"element","p",{},[27],{"type":28,"value":29},"text","Kullanacağımız sistemler:",{"type":23,"tag":31,"props":32,"children":33},"ul",{},[34,40,45,57,62],{"type":23,"tag":35,"props":36,"children":37},"li",{},[38],{"type":28,"value":39},"Wordpress",{"type":23,"tag":35,"props":41,"children":42},{},[43],{"type":28,"value":44},"CloudFlare",{"type":23,"tag":35,"props":46,"children":47},{},[48],{"type":23,"tag":49,"props":50,"children":54},"a",{"href":51,"rel":52},"https://wordpress.org/plugins/simply-static/",[53],"nofollow",[55],{"type":28,"value":56},"Simply Static – WordPress plugin",{"type":23,"tag":35,"props":58,"children":59},{},[60],{"type":28,"value":61},"Github Actions",{"type":23,"tag":35,"props":63,"children":64},{},[65],{"type":28,"value":66},"Bash script",{"type":23,"tag":24,"props":68,"children":69},{},[70],{"type":28,"value":71},"Wordpress'te simply statik eklentisini kuruyoruz. Eklentinin Settings -> Deployment sayfasında Deployment Method olarak Local Directory seçiyoruz. PATH olarak /var/www/static/ girdim.\nBulunduğumuz domainle aynı yerde yayınlamayacağımız için Replacing URLs ayarlarında Relative Paths seçip / değerini giriyoruz.\nAdvanced ayarlar sayfasında da Force URL Replacements seçeneğini aktifleştiriyoruz.",{"type":23,"tag":24,"props":73,"children":74},{},[75],{"type":28,"value":76},"Benim DNS ayarlarım CloudFlare'de. Sitemi Proxied seçeneğini kapatıp sadece DNS kaydı olarak tutuyorum. certbot ile sunucuda SSL ayarlıyorum.",{"type":23,"tag":24,"props":78,"children":79},{},[80],{"type":28,"value":81},"Sunucuda dizini oluşturup eklentide Generate Static Files butonuna basarak işlemi başlatıyoruz.\nDebugging Mode ayarı var, onu aktifleştirebiliriz. Activity Log sayfasından işlemi takip edebiliyoruz.",{"type":23,"tag":24,"props":83,"children":84},{},[85,87],{"type":28,"value":86},"Sunucuda /var/www/static/ dizinini GitHub'da bir repo açarak oraya yüklüyoruz.\nDeploy keys ile yapmak için: ",{"type":23,"tag":49,"props":88,"children":91},{"href":89,"rel":90},"https://dylancastillo.co/how-to-use-github-deploy-keys/",[53],[92],{"type":28,"value":93},"How to Use GitHub Deploy Keys (dylancastillo.co)",{"type":23,"tag":24,"props":95,"children":96},{},[97],{"type":28,"value":98},"İlk sefer dışında buraya girmeye gerek kalmasın diye güncellemeleri push'layan bir bash script'i root hesabındayken crontab'a ekliyorum.",{"type":23,"tag":100,"props":101,"children":103},"pre",{"code":102},"* * * * * [ $(find /var/www/ufkayolculuk_wp/index.html -type f | wc -l) -gt 0 ];then /var/www/static.sh && cd /var/www/static && git add . && git commit -m \"Automatic Commit\" && git push; fi\n",[104],{"type":23,"tag":105,"props":106,"children":107},"code",{"__ignoreMap":5},[108],{"type":28,"value":102},{"type":23,"tag":24,"props":110,"children":111},{},[112],{"type":28,"value":113},"Baştaki if komutunu bir kaç denemeden sonra farkederek ekledim. Statik dosyaların generate işlemi sırasında index.html olmadığı için bu sorgu sayesinde o işlemin bitmesini beklemiş oluyorum.",{"type":23,"tag":24,"props":115,"children":116},{},[117],{"type":28,"value":118},"GitHub deploy keys kullanmazsam Git işlemleri yapılabilmesi için şu komutu kullanıp bir defa manuel git commit ve push işlemini yapıyorum",{"type":23,"tag":100,"props":120,"children":122},{"code":121},"git config --global credential.helper store\n",[123],{"type":23,"tag":105,"props":124,"children":125},{"__ignoreMap":5},[126],{"type":28,"value":121},{"type":23,"tag":24,"props":128,"children":129},{},[130],{"type":28,"value":131},"Cron job ile çalıştırılan /var/www/static.sh dosyası:",{"type":23,"tag":100,"props":133,"children":135},{"code":134},"#!/bin/sh\n/usr/bin/find /var/www/static/ -maxdepth 3 -type f -name 'index.html' -exec /usr/bin/sed -i 's+\u003C\\\\/+\u003C/+g' {} \\;\n",[136],{"type":23,"tag":105,"props":137,"children":138},{"__ignoreMap":5},[139],{"type":28,"value":134},{"type":23,"tag":100,"props":141,"children":143},{"code":142},"chmod +x /var/www/static.sh\n",[144],{"type":23,"tag":105,"props":145,"children":146},{"__ignoreMap":5},[147],{"type":28,"value":142},{"type":23,"tag":24,"props":149,"children":150},{},[151],{"type":28,"value":152},"CloudFlare Pages'ta yeni bir kayıt oluşturuyoruz, GitHub'daki repomuza bağlıyoruz. Statik dosyalar olduğu için build ayarlarında değişiklik yapmadan yayına alıyoruz.",{"type":23,"tag":24,"props":154,"children":155},{},[156],{"type":28,"value":157},"Artık GitHub'da her değişiklikte sitemiz güncellenicek. Ayrıca CloudFlare Pages'taki pages.dev uzantılı adresi Custom Domains sayfasından kendi alan adınıza bağlayabiliyorsunuz.",{"title":5,"searchDepth":159,"depth":159,"links":160},2,[],"markdown","content:statik-wordpress-sitesi.md","content","statik-wordpress-sitesi.md","statik-wordpress-sitesi","md",[],1730633586180]