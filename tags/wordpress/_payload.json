[{"data":1,"prerenderedAt":169},["ShallowReactive",2],{"/tags/wordpress":3,"search-api":168},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":6,"title":8,"description":6,"id":9,"date":10,"categories":11,"tags":13,"cover":6,"readingTime":15,"body":20,"_type":162,"_id":163,"_source":164,"_file":165,"_stem":166,"_extension":167},"/statik-wordpress-sitesi","",false,"Statik Wordpress Sitesi","1","2023-11-16",[12],"web",[14],"wordpress",{"text":16,"minutes":17,"time":18,"words":19},"2 min read",1.315,78900,263,{"type":21,"children":22,"toc":159},"root",[23,31,68,73,78,83,95,100,110,115,120,128,133,141,149,154],{"type":24,"tag":25,"props":26,"children":27},"element","p",{},[28],{"type":29,"value":30},"text","Kullanacağımız sistemler:",{"type":24,"tag":32,"props":33,"children":34},"ul",{},[35,41,46,58,63],{"type":24,"tag":36,"props":37,"children":38},"li",{},[39],{"type":29,"value":40},"Wordpress",{"type":24,"tag":36,"props":42,"children":43},{},[44],{"type":29,"value":45},"CloudFlare",{"type":24,"tag":36,"props":47,"children":48},{},[49],{"type":24,"tag":50,"props":51,"children":55},"a",{"href":52,"rel":53},"https://wordpress.org/plugins/simply-static/",[54],"nofollow",[56],{"type":29,"value":57},"Simply Static – WordPress plugin",{"type":24,"tag":36,"props":59,"children":60},{},[61],{"type":29,"value":62},"Github Actions",{"type":24,"tag":36,"props":64,"children":65},{},[66],{"type":29,"value":67},"Bash script",{"type":24,"tag":25,"props":69,"children":70},{},[71],{"type":29,"value":72},"Wordpress'te simply statik eklentisini kuruyoruz. Eklentinin Settings -> Deployment sayfasında Deployment Method olarak Local Directory seçiyoruz. PATH olarak /var/www/static/ girdim.\nBulunduğumuz domainle aynı yerde yayınlamayacağımız için Replacing URLs ayarlarında Relative Paths seçip / değerini giriyoruz.\nAdvanced ayarlar sayfasında da Force URL Replacements seçeneğini aktifleştiriyoruz.",{"type":24,"tag":25,"props":74,"children":75},{},[76],{"type":29,"value":77},"Benim DNS ayarlarım CloudFlare'de. Sitemi Proxied seçeneğini kapatıp sadece DNS kaydı olarak tutuyorum. certbot ile sunucuda SSL ayarlıyorum.",{"type":24,"tag":25,"props":79,"children":80},{},[81],{"type":29,"value":82},"Sunucuda dizini oluşturup eklentide Generate Static Files butonuna basarak işlemi başlatıyoruz.\nDebugging Mode ayarı var, onu aktifleştirebiliriz. Activity Log sayfasından işlemi takip edebiliyoruz.",{"type":24,"tag":25,"props":84,"children":85},{},[86,88],{"type":29,"value":87},"Sunucuda /var/www/static/ dizinini GitHub'da bir repo açarak oraya yüklüyoruz.\nDeploy keys ile yapmak için: ",{"type":24,"tag":50,"props":89,"children":92},{"href":90,"rel":91},"https://dylancastillo.co/how-to-use-github-deploy-keys/",[54],[93],{"type":29,"value":94},"How to Use GitHub Deploy Keys (dylancastillo.co)",{"type":24,"tag":25,"props":96,"children":97},{},[98],{"type":29,"value":99},"İlk sefer dışında buraya girmeye gerek kalmasın diye güncellemeleri push'layan bir bash script'i root hesabındayken crontab'a ekliyorum.",{"type":24,"tag":101,"props":102,"children":104},"pre",{"code":103},"* * * * * [ $(find /var/www/ufkayolculuk_wp/index.html -type f | wc -l) -gt 0 ];then /var/www/static.sh && cd /var/www/static && git add . && git commit -m \"Automatic Commit\" && git push; fi\n",[105],{"type":24,"tag":106,"props":107,"children":108},"code",{"__ignoreMap":6},[109],{"type":29,"value":103},{"type":24,"tag":25,"props":111,"children":112},{},[113],{"type":29,"value":114},"Baştaki if komutunu bir kaç denemeden sonra farkederek ekledim. Statik dosyaların generate işlemi sırasında index.html olmadığı için bu sorgu sayesinde o işlemin bitmesini beklemiş oluyorum.",{"type":24,"tag":25,"props":116,"children":117},{},[118],{"type":29,"value":119},"GitHub deploy keys kullanmazsam Git işlemleri yapılabilmesi için şu komutu kullanıp bir defa manuel git commit ve push işlemini yapıyorum",{"type":24,"tag":101,"props":121,"children":123},{"code":122},"git config --global credential.helper store\n",[124],{"type":24,"tag":106,"props":125,"children":126},{"__ignoreMap":6},[127],{"type":29,"value":122},{"type":24,"tag":25,"props":129,"children":130},{},[131],{"type":29,"value":132},"Cron job ile çalıştırılan /var/www/static.sh dosyası:",{"type":24,"tag":101,"props":134,"children":136},{"code":135},"#!/bin/sh\n/usr/bin/find /var/www/static/ -maxdepth 3 -type f -name 'index.html' -exec /usr/bin/sed -i 's+\u003C\\\\/+\u003C/+g' {} \\;\n",[137],{"type":24,"tag":106,"props":138,"children":139},{"__ignoreMap":6},[140],{"type":29,"value":135},{"type":24,"tag":101,"props":142,"children":144},{"code":143},"chmod +x /var/www/static.sh\n",[145],{"type":24,"tag":106,"props":146,"children":147},{"__ignoreMap":6},[148],{"type":29,"value":143},{"type":24,"tag":25,"props":150,"children":151},{},[152],{"type":29,"value":153},"CloudFlare Pages'ta yeni bir kayıt oluşturuyoruz, GitHub'daki repomuza bağlıyoruz. Statik dosyalar olduğu için build ayarlarında değişiklik yapmadan yayına alıyoruz.",{"type":24,"tag":25,"props":155,"children":156},{},[157],{"type":29,"value":158},"Artık GitHub'da her değişiklikte sitemiz güncellenicek. Ayrıca CloudFlare Pages'taki pages.dev uzantılı adresi Custom Domains sayfasından kendi alan adınıza bağlayabiliyorsunuz.",{"title":6,"searchDepth":160,"depth":160,"links":161},2,[],"markdown","content:statik-wordpress-sitesi.md","content","statik-wordpress-sitesi.md","statik-wordpress-sitesi","md",[],1730633586181]